(()=>{var gn=Object.create;var Mr=Object.defineProperty,An=Object.defineProperties,En=Object.getOwnPropertyDescriptor,Rn=Object.getOwnPropertyDescriptors,On=Object.getOwnPropertyNames,Wr=Object.getOwnPropertySymbols,Pn=Object.getPrototypeOf,Gr=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable;var Xr=(r,e,n)=>e in r?Mr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[e]=n,Hr=(r,e)=>{for(var n in e||(e={}))Gr.call(e,n)&&Xr(r,n,e[n]);if(Wr)for(var n of Wr(e))Tn.call(e,n)&&Xr(r,n,e[n]);return r},Zr=(r,e)=>An(r,Rn(e)),Sn=r=>Mr(r,"__esModule",{value:!0});var W=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Fn=(r,e,n,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of On(e))!Gr.call(r,a)&&(n||a!=="default")&&Mr(r,a,{get:()=>e[a],enumerable:!(t=En(e,a))||t.enumerable});return r},Qr=(r,e)=>Fn(Sn(Mr(r!=null?gn(Pn(r)):{},"default",!e&&r&&r.__esModule?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var J=W(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.setMatrixArrayType=Nn;Z.toRadian=qn;Z.equals=Dn;Z.RANDOM=Z.ARRAY_TYPE=Z.EPSILON=void 0;var Kr=1e-6;Z.EPSILON=Kr;var Jr=typeof Float32Array!="undefined"?Float32Array:Array;Z.ARRAY_TYPE=Jr;var In=Math.random;Z.RANDOM=In;function Nn(r){Z.ARRAY_TYPE=Jr=r}var wn=Math.PI/180;function qn(r){return r*wn}function Dn(r,e){return Math.abs(r-e)<=Kr*Math.max(1,Math.abs(r),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)})});var re=W(q=>{"use strict";function pr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?pr=function(n){return typeof n}:pr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},pr(r)}Object.defineProperty(q,"__esModule",{value:!0});q.create=on;q.clone=zn;q.copy=Yn;q.identity=Bn;q.fromValues=bn;q.set=Un;q.transpose=Cn;q.invert=un;q.adjoint=Vn;q.determinant=Wn;q.multiply=kr;q.rotate=Gn;q.scale=Xn;q.fromRotation=Hn;q.fromScaling=Zn;q.str=Qn;q.frob=Kn;q.LDU=Jn;q.add=$n;q.subtract=jr;q.exactEquals=kn;q.equals=jn;q.multiplyScalar=rt;q.multiplyScalarAndAdd=et;q.sub=q.mul=void 0;var tr=Ln(J());function $r(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return($r=function(a){return a?n:e})(r)}function Ln(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||pr(r)!=="object"&&typeof r!="function")return{default:r};var n=$r(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function on(){var r=new tr.ARRAY_TYPE(4);return tr.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r}function zn(r){var e=new tr.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function Yn(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function Bn(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r}function bn(r,e,n,t){var a=new tr.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=t,a}function Un(r,e,n,t,a){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r}function Cn(r,e){if(r===e){var n=e[1];r[1]=e[2],r[2]=n}else r[0]=e[0],r[1]=e[2],r[2]=e[1],r[3]=e[3];return r}function un(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=n*i-a*t;return s?(s=1/s,r[0]=i*s,r[1]=-t*s,r[2]=-a*s,r[3]=n*s,r):null}function Vn(r,e){var n=e[0];return r[0]=e[3],r[1]=-e[1],r[2]=-e[2],r[3]=n,r}function Wn(r){return r[0]*r[3]-r[2]*r[1]}function kr(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[0],l=n[1],f=n[2],v=n[3];return r[0]=t*c+i*l,r[1]=a*c+s*l,r[2]=t*f+i*v,r[3]=a*f+s*v,r}function Gn(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=Math.sin(n),l=Math.cos(n);return r[0]=t*l+i*c,r[1]=a*l+s*c,r[2]=t*-c+i*l,r[3]=a*-c+s*l,r}function Xn(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[0],l=n[1];return r[0]=t*c,r[1]=a*c,r[2]=i*l,r[3]=s*l,r}function Hn(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=t,r[1]=n,r[2]=-n,r[3]=t,r}function Zn(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r}function Qn(r){return"mat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function Kn(r){return Math.hypot(r[0],r[1],r[2],r[3])}function Jn(r,e,n,t){return r[2]=t[2]/t[0],n[0]=t[0],n[1]=t[1],n[3]=t[3]-r[2]*n[1],[r,e,n]}function $n(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r}function jr(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r}function kn(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function jn(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=e[0],c=e[1],l=e[2],f=e[3];return Math.abs(n-s)<=tr.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(t-c)<=tr.EPSILON*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(a-l)<=tr.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=tr.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))}function rt(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r}function et(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r[3]=e[3]+n[3]*t,r}var nt=kr;q.mul=nt;var tt=jr;q.sub=tt});var ae=W(D=>{"use strict";function yr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?yr=function(n){return typeof n}:yr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yr(r)}Object.defineProperty(D,"__esModule",{value:!0});D.create=it;D.clone=st;D.copy=ct;D.identity=lt;D.fromValues=ft;D.set=vt;D.invert=ht;D.determinant=Mt;D.multiply=ne;D.rotate=pt;D.scale=yt;D.translate=mt;D.fromRotation=_t;D.fromScaling=dt;D.fromTranslation=xt;D.str=gt;D.frob=At;D.add=Et;D.subtract=te;D.multiplyScalar=Rt;D.multiplyScalarAndAdd=Ot;D.exactEquals=Pt;D.equals=Tt;D.sub=D.mul=void 0;var $=at(J());function ee(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ee=function(a){return a?n:e})(r)}function at(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||yr(r)!=="object"&&typeof r!="function")return{default:r};var n=ee(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function it(){var r=new $.ARRAY_TYPE(6);return $.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[4]=0,r[5]=0),r[0]=1,r[3]=1,r}function st(r){var e=new $.ARRAY_TYPE(6);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e}function ct(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function lt(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r}function ft(r,e,n,t,a,i){var s=new $.ARRAY_TYPE(6);return s[0]=r,s[1]=e,s[2]=n,s[3]=t,s[4]=a,s[5]=i,s}function vt(r,e,n,t,a,i,s){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r[4]=i,r[5]=s,r}function ht(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=n*i-t*a;return l?(l=1/l,r[0]=i*l,r[1]=-t*l,r[2]=-a*l,r[3]=n*l,r[4]=(a*c-i*s)*l,r[5]=(t*s-n*c)*l,r):null}function Mt(r){return r[0]*r[3]-r[1]*r[2]}function ne(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=n[0],v=n[1],h=n[2],p=n[3],M=n[4],m=n[5];return r[0]=t*f+i*v,r[1]=a*f+s*v,r[2]=t*h+i*p,r[3]=a*h+s*p,r[4]=t*M+i*m+c,r[5]=a*M+s*m+l,r}function pt(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=Math.sin(n),v=Math.cos(n);return r[0]=t*v+i*f,r[1]=a*v+s*f,r[2]=t*-f+i*v,r[3]=a*-f+s*v,r[4]=c,r[5]=l,r}function yt(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=n[0],v=n[1];return r[0]=t*f,r[1]=a*f,r[2]=i*v,r[3]=s*v,r[4]=c,r[5]=l,r}function mt(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=n[0],v=n[1];return r[0]=t,r[1]=a,r[2]=i,r[3]=s,r[4]=t*f+i*v+c,r[5]=a*f+s*v+l,r}function _t(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=t,r[1]=n,r[2]=-n,r[3]=t,r[4]=0,r[5]=0,r}function dt(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=e[1],r[4]=0,r[5]=0,r}function xt(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0],r[5]=e[1],r}function gt(r){return"mat2d("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+")"}function At(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],1)}function Et(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r}function te(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r}function Rt(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r}function Ot(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r[3]=e[3]+n[3]*t,r[4]=e[4]+n[4]*t,r[5]=e[5]+n[5]*t,r}function Pt(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]}function Tt(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=r[4],c=r[5],l=e[0],f=e[1],v=e[2],h=e[3],p=e[4],M=e[5];return Math.abs(n-l)<=$.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(t-f)<=$.EPSILON*Math.max(1,Math.abs(t),Math.abs(f))&&Math.abs(a-v)<=$.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-h)<=$.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(s-p)<=$.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(c-M)<=$.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))}var St=ne;D.mul=St;var Ft=te;D.sub=Ft});var Nr=W(w=>{"use strict";function mr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?mr=function(n){return typeof n}:mr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},mr(r)}Object.defineProperty(w,"__esModule",{value:!0});w.create=Nt;w.fromMat4=wt;w.clone=qt;w.copy=Dt;w.fromValues=Lt;w.set=ot;w.identity=zt;w.transpose=Yt;w.invert=Bt;w.adjoint=bt;w.determinant=Ut;w.multiply=se;w.translate=Ct;w.rotate=ut;w.scale=Vt;w.fromTranslation=Wt;w.fromRotation=Gt;w.fromScaling=Xt;w.fromMat2d=Ht;w.fromQuat=Zt;w.normalFromMat4=Qt;w.projection=Kt;w.str=Jt;w.frob=$t;w.add=kt;w.subtract=ce;w.multiplyScalar=jt;w.multiplyScalarAndAdd=ra;w.exactEquals=ea;w.equals=na;w.sub=w.mul=void 0;var X=It(J());function ie(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ie=function(a){return a?n:e})(r)}function It(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||mr(r)!=="object"&&typeof r!="function")return{default:r};var n=ie(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function Nt(){var r=new X.ARRAY_TYPE(9);return X.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[5]=0,r[6]=0,r[7]=0),r[0]=1,r[4]=1,r[8]=1,r}function wt(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[4],r[4]=e[5],r[5]=e[6],r[6]=e[8],r[7]=e[9],r[8]=e[10],r}function qt(r){var e=new X.ARRAY_TYPE(9);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e}function Dt(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Lt(r,e,n,t,a,i,s,c,l){var f=new X.ARRAY_TYPE(9);return f[0]=r,f[1]=e,f[2]=n,f[3]=t,f[4]=a,f[5]=i,f[6]=s,f[7]=c,f[8]=l,f}function ot(r,e,n,t,a,i,s,c,l,f){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r[4]=i,r[5]=s,r[6]=c,r[7]=l,r[8]=f,r}function zt(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Yt(r,e){if(r===e){var n=e[1],t=e[2],a=e[5];r[1]=e[3],r[2]=e[6],r[3]=n,r[5]=e[7],r[6]=t,r[7]=a}else r[0]=e[0],r[1]=e[3],r[2]=e[6],r[3]=e[1],r[4]=e[4],r[5]=e[7],r[6]=e[2],r[7]=e[5],r[8]=e[8];return r}function Bt(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=e[6],f=e[7],v=e[8],h=v*s-c*f,p=-v*i+c*l,M=f*i-s*l,m=n*h+t*p+a*M;return m?(m=1/m,r[0]=h*m,r[1]=(-v*t+a*f)*m,r[2]=(c*t-a*s)*m,r[3]=p*m,r[4]=(v*n-a*l)*m,r[5]=(-c*n+a*i)*m,r[6]=M*m,r[7]=(-f*n+t*l)*m,r[8]=(s*n-t*i)*m,r):null}function bt(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=e[6],f=e[7],v=e[8];return r[0]=s*v-c*f,r[1]=a*f-t*v,r[2]=t*c-a*s,r[3]=c*l-i*v,r[4]=n*v-a*l,r[5]=a*i-n*c,r[6]=i*f-s*l,r[7]=t*l-n*f,r[8]=n*s-t*i,r}function Ut(r){var e=r[0],n=r[1],t=r[2],a=r[3],i=r[4],s=r[5],c=r[6],l=r[7],f=r[8];return e*(f*i-s*l)+n*(-f*a+s*c)+t*(l*a-i*c)}function se(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=e[8],p=n[0],M=n[1],m=n[2],_=n[3],y=n[4],d=n[5],P=n[6],R=n[7],O=n[8];return r[0]=p*t+M*s+m*f,r[1]=p*a+M*c+m*v,r[2]=p*i+M*l+m*h,r[3]=_*t+y*s+d*f,r[4]=_*a+y*c+d*v,r[5]=_*i+y*l+d*h,r[6]=P*t+R*s+O*f,r[7]=P*a+R*c+O*v,r[8]=P*i+R*l+O*h,r}function Ct(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=e[8],p=n[0],M=n[1];return r[0]=t,r[1]=a,r[2]=i,r[3]=s,r[4]=c,r[5]=l,r[6]=p*t+M*s+f,r[7]=p*a+M*c+v,r[8]=p*i+M*l+h,r}function ut(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=e[8],p=Math.sin(n),M=Math.cos(n);return r[0]=M*t+p*s,r[1]=M*a+p*c,r[2]=M*i+p*l,r[3]=M*s-p*t,r[4]=M*c-p*a,r[5]=M*l-p*i,r[6]=f,r[7]=v,r[8]=h,r}function Vt(r,e,n){var t=n[0],a=n[1];return r[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=a*e[3],r[4]=a*e[4],r[5]=a*e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r}function Wt(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=1,r[5]=0,r[6]=e[0],r[7]=e[1],r[8]=1,r}function Gt(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=-n,r[4]=t,r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Xt(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=e[1],r[5]=0,r[6]=0,r[7]=0,r[8]=1,r}function Ht(r,e){return r[0]=e[0],r[1]=e[1],r[2]=0,r[3]=e[2],r[4]=e[3],r[5]=0,r[6]=e[4],r[7]=e[5],r[8]=1,r}function Zt(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=n+n,c=t+t,l=a+a,f=n*s,v=t*s,h=t*c,p=a*s,M=a*c,m=a*l,_=i*s,y=i*c,d=i*l;return r[0]=1-h-m,r[3]=v-d,r[6]=p+y,r[1]=v+d,r[4]=1-f-m,r[7]=M-_,r[2]=p-y,r[5]=M+_,r[8]=1-f-h,r}function Qt(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=e[6],f=e[7],v=e[8],h=e[9],p=e[10],M=e[11],m=e[12],_=e[13],y=e[14],d=e[15],P=n*c-t*s,R=n*l-a*s,O=n*f-i*s,F=t*l-a*c,S=t*f-i*c,b=a*f-i*l,z=v*_-h*m,Y=v*y-p*m,L=v*d-M*m,U=h*y-p*_,B=h*d-M*_,C=p*d-M*y,N=P*C-R*B+O*U+F*L-S*Y+b*z;return N?(N=1/N,r[0]=(c*C-l*B+f*U)*N,r[1]=(l*L-s*C-f*Y)*N,r[2]=(s*B-c*L+f*z)*N,r[3]=(a*B-t*C-i*U)*N,r[4]=(n*C-a*L+i*Y)*N,r[5]=(t*L-n*B-i*z)*N,r[6]=(_*b-y*S+d*F)*N,r[7]=(y*O-m*b-d*R)*N,r[8]=(m*S-_*O+d*P)*N,r):null}function Kt(r,e,n){return r[0]=2/e,r[1]=0,r[2]=0,r[3]=0,r[4]=-2/n,r[5]=0,r[6]=-1,r[7]=1,r[8]=1,r}function Jt(r){return"mat3("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+")"}function $t(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])}function kt(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r}function ce(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r}function jt(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r}function ra(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r[3]=e[3]+n[3]*t,r[4]=e[4]+n[4]*t,r[5]=e[5]+n[5]*t,r[6]=e[6]+n[6]*t,r[7]=e[7]+n[7]*t,r[8]=e[8]+n[8]*t,r}function ea(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]}function na(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=r[4],c=r[5],l=r[6],f=r[7],v=r[8],h=e[0],p=e[1],M=e[2],m=e[3],_=e[4],y=e[5],d=e[6],P=e[7],R=e[8];return Math.abs(n-h)<=X.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(t-p)<=X.EPSILON*Math.max(1,Math.abs(t),Math.abs(p))&&Math.abs(a-M)<=X.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-m)<=X.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(s-_)<=X.EPSILON*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(c-y)<=X.EPSILON*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-d)<=X.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(f-P)<=X.EPSILON*Math.max(1,Math.abs(f),Math.abs(P))&&Math.abs(v-R)<=X.EPSILON*Math.max(1,Math.abs(v),Math.abs(R))}var ta=se;w.mul=ta;var aa=ce;w.sub=aa});var wr=W(A=>{"use strict";function _r(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_r=function(n){return typeof n}:_r=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_r(r)}Object.defineProperty(A,"__esModule",{value:!0});A.create=sa;A.clone=ca;A.copy=la;A.fromValues=fa;A.set=va;A.identity=fe;A.transpose=ha;A.invert=Ma;A.adjoint=pa;A.determinant=ya;A.multiply=ve;A.translate=ma;A.scale=_a;A.rotate=da;A.rotateX=xa;A.rotateY=ga;A.rotateZ=Aa;A.fromTranslation=Ea;A.fromScaling=Ra;A.fromRotation=Oa;A.fromXRotation=Pa;A.fromYRotation=Ta;A.fromZRotation=Sa;A.fromRotationTranslation=he;A.fromQuat2=Fa;A.getTranslation=Ia;A.getScaling=Me;A.getRotation=Na;A.fromRotationTranslationScale=wa;A.fromRotationTranslationScaleOrigin=qa;A.fromQuat=Da;A.frustum=La;A.perspectiveNO=pe;A.perspectiveZO=za;A.perspectiveFromFieldOfView=Ya;A.orthoNO=ye;A.orthoZO=ba;A.lookAt=Ua;A.targetTo=Ca;A.str=ua;A.frob=Va;A.add=Wa;A.subtract=me;A.multiplyScalar=Ga;A.multiplyScalarAndAdd=Xa;A.exactEquals=Ha;A.equals=Za;A.sub=A.mul=A.ortho=A.perspective=void 0;var o=ia(J());function le(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(le=function(a){return a?n:e})(r)}function ia(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||_r(r)!=="object"&&typeof r!="function")return{default:r};var n=le(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function sa(){var r=new o.ARRAY_TYPE(16);return o.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function ca(r){var e=new o.ARRAY_TYPE(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function la(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function fa(r,e,n,t,a,i,s,c,l,f,v,h,p,M,m,_){var y=new o.ARRAY_TYPE(16);return y[0]=r,y[1]=e,y[2]=n,y[3]=t,y[4]=a,y[5]=i,y[6]=s,y[7]=c,y[8]=l,y[9]=f,y[10]=v,y[11]=h,y[12]=p,y[13]=M,y[14]=m,y[15]=_,y}function va(r,e,n,t,a,i,s,c,l,f,v,h,p,M,m,_,y){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r[4]=i,r[5]=s,r[6]=c,r[7]=l,r[8]=f,r[9]=v,r[10]=h,r[11]=p,r[12]=M,r[13]=m,r[14]=_,r[15]=y,r}function fe(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function ha(r,e){if(r===e){var n=e[1],t=e[2],a=e[3],i=e[6],s=e[7],c=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=t,r[9]=i,r[11]=e[14],r[12]=a,r[13]=s,r[14]=c}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function Ma(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=e[6],f=e[7],v=e[8],h=e[9],p=e[10],M=e[11],m=e[12],_=e[13],y=e[14],d=e[15],P=n*c-t*s,R=n*l-a*s,O=n*f-i*s,F=t*l-a*c,S=t*f-i*c,b=a*f-i*l,z=v*_-h*m,Y=v*y-p*m,L=v*d-M*m,U=h*y-p*_,B=h*d-M*_,C=p*d-M*y,N=P*C-R*B+O*U+F*L-S*Y+b*z;return N?(N=1/N,r[0]=(c*C-l*B+f*U)*N,r[1]=(a*B-t*C-i*U)*N,r[2]=(_*b-y*S+d*F)*N,r[3]=(p*S-h*b-M*F)*N,r[4]=(l*L-s*C-f*Y)*N,r[5]=(n*C-a*L+i*Y)*N,r[6]=(y*O-m*b-d*R)*N,r[7]=(v*b-p*O+M*R)*N,r[8]=(s*B-c*L+f*z)*N,r[9]=(t*L-n*B-i*z)*N,r[10]=(m*S-_*O+d*P)*N,r[11]=(h*O-v*S-M*P)*N,r[12]=(c*Y-s*U-l*z)*N,r[13]=(n*U-t*Y+a*z)*N,r[14]=(_*R-m*F-y*P)*N,r[15]=(v*F-h*R+p*P)*N,r):null}function pa(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=e[4],c=e[5],l=e[6],f=e[7],v=e[8],h=e[9],p=e[10],M=e[11],m=e[12],_=e[13],y=e[14],d=e[15];return r[0]=c*(p*d-M*y)-h*(l*d-f*y)+_*(l*M-f*p),r[1]=-(t*(p*d-M*y)-h*(a*d-i*y)+_*(a*M-i*p)),r[2]=t*(l*d-f*y)-c*(a*d-i*y)+_*(a*f-i*l),r[3]=-(t*(l*M-f*p)-c*(a*M-i*p)+h*(a*f-i*l)),r[4]=-(s*(p*d-M*y)-v*(l*d-f*y)+m*(l*M-f*p)),r[5]=n*(p*d-M*y)-v*(a*d-i*y)+m*(a*M-i*p),r[6]=-(n*(l*d-f*y)-s*(a*d-i*y)+m*(a*f-i*l)),r[7]=n*(l*M-f*p)-s*(a*M-i*p)+v*(a*f-i*l),r[8]=s*(h*d-M*_)-v*(c*d-f*_)+m*(c*M-f*h),r[9]=-(n*(h*d-M*_)-v*(t*d-i*_)+m*(t*M-i*h)),r[10]=n*(c*d-f*_)-s*(t*d-i*_)+m*(t*f-i*c),r[11]=-(n*(c*M-f*h)-s*(t*M-i*h)+v*(t*f-i*c)),r[12]=-(s*(h*y-p*_)-v*(c*y-l*_)+m*(c*p-l*h)),r[13]=n*(h*y-p*_)-v*(t*y-a*_)+m*(t*p-a*h),r[14]=-(n*(c*y-l*_)-s*(t*y-a*_)+m*(t*l-a*c)),r[15]=n*(c*p-l*h)-s*(t*p-a*h)+v*(t*l-a*c),r}function ya(r){var e=r[0],n=r[1],t=r[2],a=r[3],i=r[4],s=r[5],c=r[6],l=r[7],f=r[8],v=r[9],h=r[10],p=r[11],M=r[12],m=r[13],_=r[14],y=r[15],d=e*s-n*i,P=e*c-t*i,R=e*l-a*i,O=n*c-t*s,F=n*l-a*s,S=t*l-a*c,b=f*m-v*M,z=f*_-h*M,Y=f*y-p*M,L=v*_-h*m,U=v*y-p*m,B=h*y-p*_;return d*B-P*U+R*L+O*Y-F*z+S*b}function ve(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=e[8],p=e[9],M=e[10],m=e[11],_=e[12],y=e[13],d=e[14],P=e[15],R=n[0],O=n[1],F=n[2],S=n[3];return r[0]=R*t+O*c+F*h+S*_,r[1]=R*a+O*l+F*p+S*y,r[2]=R*i+O*f+F*M+S*d,r[3]=R*s+O*v+F*m+S*P,R=n[4],O=n[5],F=n[6],S=n[7],r[4]=R*t+O*c+F*h+S*_,r[5]=R*a+O*l+F*p+S*y,r[6]=R*i+O*f+F*M+S*d,r[7]=R*s+O*v+F*m+S*P,R=n[8],O=n[9],F=n[10],S=n[11],r[8]=R*t+O*c+F*h+S*_,r[9]=R*a+O*l+F*p+S*y,r[10]=R*i+O*f+F*M+S*d,r[11]=R*s+O*v+F*m+S*P,R=n[12],O=n[13],F=n[14],S=n[15],r[12]=R*t+O*c+F*h+S*_,r[13]=R*a+O*l+F*p+S*y,r[14]=R*i+O*f+F*M+S*d,r[15]=R*s+O*v+F*m+S*P,r}function ma(r,e,n){var t=n[0],a=n[1],i=n[2],s,c,l,f,v,h,p,M,m,_,y,d;return e===r?(r[12]=e[0]*t+e[4]*a+e[8]*i+e[12],r[13]=e[1]*t+e[5]*a+e[9]*i+e[13],r[14]=e[2]*t+e[6]*a+e[10]*i+e[14],r[15]=e[3]*t+e[7]*a+e[11]*i+e[15]):(s=e[0],c=e[1],l=e[2],f=e[3],v=e[4],h=e[5],p=e[6],M=e[7],m=e[8],_=e[9],y=e[10],d=e[11],r[0]=s,r[1]=c,r[2]=l,r[3]=f,r[4]=v,r[5]=h,r[6]=p,r[7]=M,r[8]=m,r[9]=_,r[10]=y,r[11]=d,r[12]=s*t+v*a+m*i+e[12],r[13]=c*t+h*a+_*i+e[13],r[14]=l*t+p*a+y*i+e[14],r[15]=f*t+M*a+d*i+e[15]),r}function _a(r,e,n){var t=n[0],a=n[1],i=n[2];return r[0]=e[0]*t,r[1]=e[1]*t,r[2]=e[2]*t,r[3]=e[3]*t,r[4]=e[4]*a,r[5]=e[5]*a,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*i,r[9]=e[9]*i,r[10]=e[10]*i,r[11]=e[11]*i,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function da(r,e,n,t){var a=t[0],i=t[1],s=t[2],c=Math.hypot(a,i,s),l,f,v,h,p,M,m,_,y,d,P,R,O,F,S,b,z,Y,L,U,B,C,N,K;return c<o.EPSILON?null:(c=1/c,a*=c,i*=c,s*=c,l=Math.sin(n),f=Math.cos(n),v=1-f,h=e[0],p=e[1],M=e[2],m=e[3],_=e[4],y=e[5],d=e[6],P=e[7],R=e[8],O=e[9],F=e[10],S=e[11],b=a*a*v+f,z=i*a*v+s*l,Y=s*a*v-i*l,L=a*i*v-s*l,U=i*i*v+f,B=s*i*v+a*l,C=a*s*v+i*l,N=i*s*v-a*l,K=s*s*v+f,r[0]=h*b+_*z+R*Y,r[1]=p*b+y*z+O*Y,r[2]=M*b+d*z+F*Y,r[3]=m*b+P*z+S*Y,r[4]=h*L+_*U+R*B,r[5]=p*L+y*U+O*B,r[6]=M*L+d*U+F*B,r[7]=m*L+P*U+S*B,r[8]=h*C+_*N+R*K,r[9]=p*C+y*N+O*K,r[10]=M*C+d*N+F*K,r[11]=m*C+P*N+S*K,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function xa(r,e,n){var t=Math.sin(n),a=Math.cos(n),i=e[4],s=e[5],c=e[6],l=e[7],f=e[8],v=e[9],h=e[10],p=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=i*a+f*t,r[5]=s*a+v*t,r[6]=c*a+h*t,r[7]=l*a+p*t,r[8]=f*a-i*t,r[9]=v*a-s*t,r[10]=h*a-c*t,r[11]=p*a-l*t,r}function ga(r,e,n){var t=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],c=e[2],l=e[3],f=e[8],v=e[9],h=e[10],p=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=i*a-f*t,r[1]=s*a-v*t,r[2]=c*a-h*t,r[3]=l*a-p*t,r[8]=i*t+f*a,r[9]=s*t+v*a,r[10]=c*t+h*a,r[11]=l*t+p*a,r}function Aa(r,e,n){var t=Math.sin(n),a=Math.cos(n),i=e[0],s=e[1],c=e[2],l=e[3],f=e[4],v=e[5],h=e[6],p=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=i*a+f*t,r[1]=s*a+v*t,r[2]=c*a+h*t,r[3]=l*a+p*t,r[4]=f*a-i*t,r[5]=v*a-s*t,r[6]=h*a-c*t,r[7]=p*a-l*t,r}function Ea(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function Ra(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Oa(r,e,n){var t=n[0],a=n[1],i=n[2],s=Math.hypot(t,a,i),c,l,f;return s<o.EPSILON?null:(s=1/s,t*=s,a*=s,i*=s,c=Math.sin(e),l=Math.cos(e),f=1-l,r[0]=t*t*f+l,r[1]=a*t*f+i*c,r[2]=i*t*f-a*c,r[3]=0,r[4]=t*a*f-i*c,r[5]=a*a*f+l,r[6]=i*a*f+t*c,r[7]=0,r[8]=t*i*f+a*c,r[9]=a*i*f-t*c,r[10]=i*i*f+l,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function Pa(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ta(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=t,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=t,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Sa(r,e){var n=Math.sin(e),t=Math.cos(e);return r[0]=t,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=t,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function he(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=t+t,l=a+a,f=i+i,v=t*c,h=t*l,p=t*f,M=a*l,m=a*f,_=i*f,y=s*c,d=s*l,P=s*f;return r[0]=1-(M+_),r[1]=h+P,r[2]=p-d,r[3]=0,r[4]=h-P,r[5]=1-(v+_),r[6]=m+y,r[7]=0,r[8]=p+d,r[9]=m-y,r[10]=1-(v+M),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Fa(r,e){var n=new o.ARRAY_TYPE(3),t=-e[0],a=-e[1],i=-e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=t*t+a*a+i*i+s*s;return h>0?(n[0]=(c*s+v*t+l*i-f*a)*2/h,n[1]=(l*s+v*a+f*t-c*i)*2/h,n[2]=(f*s+v*i+c*a-l*t)*2/h):(n[0]=(c*s+v*t+l*i-f*a)*2,n[1]=(l*s+v*a+f*t-c*i)*2,n[2]=(f*s+v*i+c*a-l*t)*2),he(r,e,n),r}function Ia(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function Me(r,e){var n=e[0],t=e[1],a=e[2],i=e[4],s=e[5],c=e[6],l=e[8],f=e[9],v=e[10];return r[0]=Math.hypot(n,t,a),r[1]=Math.hypot(i,s,c),r[2]=Math.hypot(l,f,v),r}function Na(r,e){var n=new o.ARRAY_TYPE(3);Me(n,e);var t=1/n[0],a=1/n[1],i=1/n[2],s=e[0]*t,c=e[1]*a,l=e[2]*i,f=e[4]*t,v=e[5]*a,h=e[6]*i,p=e[8]*t,M=e[9]*a,m=e[10]*i,_=s+v+m,y=0;return _>0?(y=Math.sqrt(_+1)*2,r[3]=.25*y,r[0]=(h-M)/y,r[1]=(p-l)/y,r[2]=(c-f)/y):s>v&&s>m?(y=Math.sqrt(1+s-v-m)*2,r[3]=(h-M)/y,r[0]=.25*y,r[1]=(c+f)/y,r[2]=(p+l)/y):v>m?(y=Math.sqrt(1+v-s-m)*2,r[3]=(p-l)/y,r[0]=(c+f)/y,r[1]=.25*y,r[2]=(h+M)/y):(y=Math.sqrt(1+m-s-v)*2,r[3]=(c-f)/y,r[0]=(p+l)/y,r[1]=(h+M)/y,r[2]=.25*y),r}function wa(r,e,n,t){var a=e[0],i=e[1],s=e[2],c=e[3],l=a+a,f=i+i,v=s+s,h=a*l,p=a*f,M=a*v,m=i*f,_=i*v,y=s*v,d=c*l,P=c*f,R=c*v,O=t[0],F=t[1],S=t[2];return r[0]=(1-(m+y))*O,r[1]=(p+R)*O,r[2]=(M-P)*O,r[3]=0,r[4]=(p-R)*F,r[5]=(1-(h+y))*F,r[6]=(_+d)*F,r[7]=0,r[8]=(M+P)*S,r[9]=(_-d)*S,r[10]=(1-(h+m))*S,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function qa(r,e,n,t,a){var i=e[0],s=e[1],c=e[2],l=e[3],f=i+i,v=s+s,h=c+c,p=i*f,M=i*v,m=i*h,_=s*v,y=s*h,d=c*h,P=l*f,R=l*v,O=l*h,F=t[0],S=t[1],b=t[2],z=a[0],Y=a[1],L=a[2],U=(1-(_+d))*F,B=(M+O)*F,C=(m-R)*F,N=(M-O)*S,K=(1-(p+d))*S,fr=(y+P)*S,vr=(m+R)*b,ur=(y-P)*b,Vr=(1-(p+_))*b;return r[0]=U,r[1]=B,r[2]=C,r[3]=0,r[4]=N,r[5]=K,r[6]=fr,r[7]=0,r[8]=vr,r[9]=ur,r[10]=Vr,r[11]=0,r[12]=n[0]+z-(U*z+N*Y+vr*L),r[13]=n[1]+Y-(B*z+K*Y+ur*L),r[14]=n[2]+L-(C*z+fr*Y+Vr*L),r[15]=1,r}function Da(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=n+n,c=t+t,l=a+a,f=n*s,v=t*s,h=t*c,p=a*s,M=a*c,m=a*l,_=i*s,y=i*c,d=i*l;return r[0]=1-h-m,r[1]=v+d,r[2]=p-y,r[3]=0,r[4]=v-d,r[5]=1-f-m,r[6]=M+_,r[7]=0,r[8]=p+y,r[9]=M-_,r[10]=1-f-h,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function La(r,e,n,t,a,i,s){var c=1/(n-e),l=1/(a-t),f=1/(i-s);return r[0]=i*2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i*2*l,r[6]=0,r[7]=0,r[8]=(n+e)*c,r[9]=(a+t)*l,r[10]=(s+i)*f,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*i*2*f,r[15]=0,r}function pe(r,e,n,t,a){var i=1/Math.tan(e/2),s;return r[0]=i/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(s=1/(t-a),r[10]=(a+t)*s,r[14]=2*a*t*s):(r[10]=-1,r[14]=-2*t),r}var oa=pe;A.perspective=oa;function za(r,e,n,t,a){var i=1/Math.tan(e/2),s;return r[0]=i/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(s=1/(t-a),r[10]=a*s,r[14]=a*t*s):(r[10]=-1,r[14]=-t),r}function Ya(r,e,n,t){var a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),l=2/(s+c),f=2/(a+i);return r[0]=l,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=f,r[6]=0,r[7]=0,r[8]=-((s-c)*l*.5),r[9]=(a-i)*f*.5,r[10]=t/(n-t),r[11]=-1,r[12]=0,r[13]=0,r[14]=t*n/(n-t),r[15]=0,r}function ye(r,e,n,t,a,i,s){var c=1/(e-n),l=1/(t-a),f=1/(i-s);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*f,r[11]=0,r[12]=(e+n)*c,r[13]=(a+t)*l,r[14]=(s+i)*f,r[15]=1,r}var Ba=ye;A.ortho=Ba;function ba(r,e,n,t,a,i,s){var c=1/(e-n),l=1/(t-a),f=1/(i-s);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*l,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=f,r[11]=0,r[12]=(e+n)*c,r[13]=(a+t)*l,r[14]=i*f,r[15]=1,r}function Ua(r,e,n,t){var a,i,s,c,l,f,v,h,p,M,m=e[0],_=e[1],y=e[2],d=t[0],P=t[1],R=t[2],O=n[0],F=n[1],S=n[2];return Math.abs(m-O)<o.EPSILON&&Math.abs(_-F)<o.EPSILON&&Math.abs(y-S)<o.EPSILON?fe(r):(v=m-O,h=_-F,p=y-S,M=1/Math.hypot(v,h,p),v*=M,h*=M,p*=M,a=P*p-R*h,i=R*v-d*p,s=d*h-P*v,M=Math.hypot(a,i,s),M?(M=1/M,a*=M,i*=M,s*=M):(a=0,i=0,s=0),c=h*s-p*i,l=p*a-v*s,f=v*i-h*a,M=Math.hypot(c,l,f),M?(M=1/M,c*=M,l*=M,f*=M):(c=0,l=0,f=0),r[0]=a,r[1]=c,r[2]=v,r[3]=0,r[4]=i,r[5]=l,r[6]=h,r[7]=0,r[8]=s,r[9]=f,r[10]=p,r[11]=0,r[12]=-(a*m+i*_+s*y),r[13]=-(c*m+l*_+f*y),r[14]=-(v*m+h*_+p*y),r[15]=1,r)}function Ca(r,e,n,t){var a=e[0],i=e[1],s=e[2],c=t[0],l=t[1],f=t[2],v=a-n[0],h=i-n[1],p=s-n[2],M=v*v+h*h+p*p;M>0&&(M=1/Math.sqrt(M),v*=M,h*=M,p*=M);var m=l*p-f*h,_=f*v-c*p,y=c*h-l*v;return M=m*m+_*_+y*y,M>0&&(M=1/Math.sqrt(M),m*=M,_*=M,y*=M),r[0]=m,r[1]=_,r[2]=y,r[3]=0,r[4]=h*y-p*_,r[5]=p*m-v*y,r[6]=v*_-h*m,r[7]=0,r[8]=v,r[9]=h,r[10]=p,r[11]=0,r[12]=a,r[13]=i,r[14]=s,r[15]=1,r}function ua(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function Va(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function Wa(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function me(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function Ga(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function Xa(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r[3]=e[3]+n[3]*t,r[4]=e[4]+n[4]*t,r[5]=e[5]+n[5]*t,r[6]=e[6]+n[6]*t,r[7]=e[7]+n[7]*t,r[8]=e[8]+n[8]*t,r[9]=e[9]+n[9]*t,r[10]=e[10]+n[10]*t,r[11]=e[11]+n[11]*t,r[12]=e[12]+n[12]*t,r[13]=e[13]+n[13]*t,r[14]=e[14]+n[14]*t,r[15]=e[15]+n[15]*t,r}function Ha(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Za(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=r[4],c=r[5],l=r[6],f=r[7],v=r[8],h=r[9],p=r[10],M=r[11],m=r[12],_=r[13],y=r[14],d=r[15],P=e[0],R=e[1],O=e[2],F=e[3],S=e[4],b=e[5],z=e[6],Y=e[7],L=e[8],U=e[9],B=e[10],C=e[11],N=e[12],K=e[13],fr=e[14],vr=e[15];return Math.abs(n-P)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(P))&&Math.abs(t-R)<=o.EPSILON*Math.max(1,Math.abs(t),Math.abs(R))&&Math.abs(a-O)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(O))&&Math.abs(i-F)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(F))&&Math.abs(s-S)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-b)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(l-z)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(z))&&Math.abs(f-Y)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(Y))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(h-U)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(U))&&Math.abs(p-B)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(M-C)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(C))&&Math.abs(m-N)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(_-K)<=o.EPSILON*Math.max(1,Math.abs(_),Math.abs(K))&&Math.abs(y-fr)<=o.EPSILON*Math.max(1,Math.abs(y),Math.abs(fr))&&Math.abs(d-vr)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(vr))}var Qa=ve;A.mul=Qa;var Ka=me;A.sub=Ka});var qr=W(g=>{"use strict";function dr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?dr=function(n){return typeof n}:dr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dr(r)}Object.defineProperty(g,"__esModule",{value:!0});g.create=de;g.clone=$a;g.length=xe;g.fromValues=ka;g.copy=ja;g.set=r1;g.add=e1;g.subtract=ge;g.multiply=Ae;g.divide=Ee;g.ceil=n1;g.floor=t1;g.min=a1;g.max=i1;g.round=s1;g.scale=c1;g.scaleAndAdd=l1;g.distance=Re;g.squaredDistance=Oe;g.squaredLength=Pe;g.negate=f1;g.inverse=v1;g.normalize=h1;g.dot=Te;g.cross=M1;g.lerp=p1;g.hermite=y1;g.bezier=m1;g.random=_1;g.transformMat4=d1;g.transformMat3=x1;g.transformQuat=g1;g.rotateX=A1;g.rotateY=E1;g.rotateZ=R1;g.angle=O1;g.zero=P1;g.str=T1;g.exactEquals=S1;g.equals=F1;g.forEach=g.sqrLen=g.len=g.sqrDist=g.dist=g.div=g.mul=g.sub=void 0;var j=Ja(J());function _e(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(_e=function(a){return a?n:e})(r)}function Ja(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||dr(r)!=="object"&&typeof r!="function")return{default:r};var n=_e(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function de(){var r=new j.ARRAY_TYPE(3);return j.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r}function $a(r){var e=new j.ARRAY_TYPE(3);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}function xe(r){var e=r[0],n=r[1],t=r[2];return Math.hypot(e,n,t)}function ka(r,e,n){var t=new j.ARRAY_TYPE(3);return t[0]=r,t[1]=e,t[2]=n,t}function ja(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}function r1(r,e,n,t){return r[0]=e,r[1]=n,r[2]=t,r}function e1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r}function ge(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r}function Ae(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r[2]=e[2]*n[2],r}function Ee(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r[2]=e[2]/n[2],r}function n1(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r}function t1(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r}function a1(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r[2]=Math.min(e[2],n[2]),r}function i1(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r[2]=Math.max(e[2],n[2]),r}function s1(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r}function c1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r}function l1(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r}function Re(r,e){var n=e[0]-r[0],t=e[1]-r[1],a=e[2]-r[2];return Math.hypot(n,t,a)}function Oe(r,e){var n=e[0]-r[0],t=e[1]-r[1],a=e[2]-r[2];return n*n+t*t+a*a}function Pe(r){var e=r[0],n=r[1],t=r[2];return e*e+n*n+t*t}function f1(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r}function v1(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r}function h1(r,e){var n=e[0],t=e[1],a=e[2],i=n*n+t*t+a*a;return i>0&&(i=1/Math.sqrt(i)),r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r}function Te(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]}function M1(r,e,n){var t=e[0],a=e[1],i=e[2],s=n[0],c=n[1],l=n[2];return r[0]=a*l-i*c,r[1]=i*s-t*l,r[2]=t*c-a*s,r}function p1(r,e,n,t){var a=e[0],i=e[1],s=e[2];return r[0]=a+t*(n[0]-a),r[1]=i+t*(n[1]-i),r[2]=s+t*(n[2]-s),r}function y1(r,e,n,t,a,i){var s=i*i,c=s*(2*i-3)+1,l=s*(i-2)+i,f=s*(i-1),v=s*(3-2*i);return r[0]=e[0]*c+n[0]*l+t[0]*f+a[0]*v,r[1]=e[1]*c+n[1]*l+t[1]*f+a[1]*v,r[2]=e[2]*c+n[2]*l+t[2]*f+a[2]*v,r}function m1(r,e,n,t,a,i){var s=1-i,c=s*s,l=i*i,f=c*s,v=3*i*c,h=3*l*s,p=l*i;return r[0]=e[0]*f+n[0]*v+t[0]*h+a[0]*p,r[1]=e[1]*f+n[1]*v+t[1]*h+a[1]*p,r[2]=e[2]*f+n[2]*v+t[2]*h+a[2]*p,r}function _1(r,e){e=e||1;var n=j.RANDOM()*2*Math.PI,t=j.RANDOM()*2-1,a=Math.sqrt(1-t*t)*e;return r[0]=Math.cos(n)*a,r[1]=Math.sin(n)*a,r[2]=t*e,r}function d1(r,e,n){var t=e[0],a=e[1],i=e[2],s=n[3]*t+n[7]*a+n[11]*i+n[15];return s=s||1,r[0]=(n[0]*t+n[4]*a+n[8]*i+n[12])/s,r[1]=(n[1]*t+n[5]*a+n[9]*i+n[13])/s,r[2]=(n[2]*t+n[6]*a+n[10]*i+n[14])/s,r}function x1(r,e,n){var t=e[0],a=e[1],i=e[2];return r[0]=t*n[0]+a*n[3]+i*n[6],r[1]=t*n[1]+a*n[4]+i*n[7],r[2]=t*n[2]+a*n[5]+i*n[8],r}function g1(r,e,n){var t=n[0],a=n[1],i=n[2],s=n[3],c=e[0],l=e[1],f=e[2],v=a*f-i*l,h=i*c-t*f,p=t*l-a*c,M=a*p-i*h,m=i*v-t*p,_=t*h-a*v,y=s*2;return v*=y,h*=y,p*=y,M*=2,m*=2,_*=2,r[0]=c+v+M,r[1]=l+h+m,r[2]=f+p+_,r}function A1(r,e,n,t){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(t)-a[2]*Math.sin(t),i[2]=a[1]*Math.sin(t)+a[2]*Math.cos(t),r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function E1(r,e,n,t){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(t)+a[0]*Math.cos(t),i[1]=a[1],i[2]=a[2]*Math.cos(t)-a[0]*Math.sin(t),r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function R1(r,e,n,t){var a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(t)-a[1]*Math.sin(t),i[1]=a[0]*Math.sin(t)+a[1]*Math.cos(t),i[2]=a[2],r[0]=i[0]+n[0],r[1]=i[1]+n[1],r[2]=i[2]+n[2],r}function O1(r,e){var n=r[0],t=r[1],a=r[2],i=e[0],s=e[1],c=e[2],l=Math.sqrt(n*n+t*t+a*a),f=Math.sqrt(i*i+s*s+c*c),v=l*f,h=v&&Te(r,e)/v;return Math.acos(Math.min(Math.max(h,-1),1))}function P1(r){return r[0]=0,r[1]=0,r[2]=0,r}function T1(r){return"vec3("+r[0]+", "+r[1]+", "+r[2]+")"}function S1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]}function F1(r,e){var n=r[0],t=r[1],a=r[2],i=e[0],s=e[1],c=e[2];return Math.abs(n-i)<=j.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(t-s)<=j.EPSILON*Math.max(1,Math.abs(t),Math.abs(s))&&Math.abs(a-c)<=j.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}var I1=ge;g.sub=I1;var N1=Ae;g.mul=N1;var w1=Ee;g.div=w1;var q1=Re;g.dist=q1;var D1=Oe;g.sqrDist=D1;var L1=xe;g.len=L1;var o1=Pe;g.sqrLen=o1;var z1=function(){var r=de();return function(e,n,t,a,i,s){var c,l;for(n||(n=3),t||(t=0),a?l=Math.min(a*n+t,e.length):l=e.length,c=t;c<l;c+=n)r[0]=e[c],r[1]=e[c+1],r[2]=e[c+2],i(r,r,s),e[c]=r[0],e[c+1]=r[1],e[c+2]=r[2];return e}}();g.forEach=z1});var Dr=W(T=>{"use strict";function xr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xr=function(n){return typeof n}:xr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xr(r)}Object.defineProperty(T,"__esModule",{value:!0});T.create=Fe;T.clone=B1;T.fromValues=b1;T.copy=U1;T.set=C1;T.add=u1;T.subtract=Ie;T.multiply=Ne;T.divide=we;T.ceil=V1;T.floor=W1;T.min=G1;T.max=X1;T.round=H1;T.scale=Z1;T.scaleAndAdd=Q1;T.distance=qe;T.squaredDistance=De;T.length=Le;T.squaredLength=oe;T.negate=K1;T.inverse=J1;T.normalize=$1;T.dot=k1;T.cross=j1;T.lerp=ri;T.random=ei;T.transformMat4=ni;T.transformQuat=ti;T.zero=ai;T.str=ii;T.exactEquals=si;T.equals=ci;T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0;var Q=Y1(J());function Se(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(Se=function(a){return a?n:e})(r)}function Y1(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||xr(r)!=="object"&&typeof r!="function")return{default:r};var n=Se(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function Fe(){var r=new Q.ARRAY_TYPE(4);return Q.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[3]=0),r}function B1(r){var e=new Q.ARRAY_TYPE(4);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e}function b1(r,e,n,t){var a=new Q.ARRAY_TYPE(4);return a[0]=r,a[1]=e,a[2]=n,a[3]=t,a}function U1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r}function C1(r,e,n,t,a){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r}function u1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r}function Ie(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r}function Ne(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r[2]=e[2]*n[2],r[3]=e[3]*n[3],r}function we(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r[2]=e[2]/n[2],r[3]=e[3]/n[3],r}function V1(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r[2]=Math.ceil(e[2]),r[3]=Math.ceil(e[3]),r}function W1(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r[2]=Math.floor(e[2]),r[3]=Math.floor(e[3]),r}function G1(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r[2]=Math.min(e[2],n[2]),r[3]=Math.min(e[3],n[3]),r}function X1(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r[2]=Math.max(e[2],n[2]),r[3]=Math.max(e[3],n[3]),r}function H1(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r[2]=Math.round(e[2]),r[3]=Math.round(e[3]),r}function Z1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r}function Q1(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r[2]=e[2]+n[2]*t,r[3]=e[3]+n[3]*t,r}function qe(r,e){var n=e[0]-r[0],t=e[1]-r[1],a=e[2]-r[2],i=e[3]-r[3];return Math.hypot(n,t,a,i)}function De(r,e){var n=e[0]-r[0],t=e[1]-r[1],a=e[2]-r[2],i=e[3]-r[3];return n*n+t*t+a*a+i*i}function Le(r){var e=r[0],n=r[1],t=r[2],a=r[3];return Math.hypot(e,n,t,a)}function oe(r){var e=r[0],n=r[1],t=r[2],a=r[3];return e*e+n*n+t*t+a*a}function K1(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=-e[3],r}function J1(r,e){return r[0]=1/e[0],r[1]=1/e[1],r[2]=1/e[2],r[3]=1/e[3],r}function $1(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=n*n+t*t+a*a+i*i;return s>0&&(s=1/Math.sqrt(s)),r[0]=n*s,r[1]=t*s,r[2]=a*s,r[3]=i*s,r}function k1(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]}function j1(r,e,n,t){var a=n[0]*t[1]-n[1]*t[0],i=n[0]*t[2]-n[2]*t[0],s=n[0]*t[3]-n[3]*t[0],c=n[1]*t[2]-n[2]*t[1],l=n[1]*t[3]-n[3]*t[1],f=n[2]*t[3]-n[3]*t[2],v=e[0],h=e[1],p=e[2],M=e[3];return r[0]=h*f-p*l+M*c,r[1]=-(v*f)+p*s-M*i,r[2]=v*l-h*s+M*a,r[3]=-(v*c)+h*i-p*a,r}function ri(r,e,n,t){var a=e[0],i=e[1],s=e[2],c=e[3];return r[0]=a+t*(n[0]-a),r[1]=i+t*(n[1]-i),r[2]=s+t*(n[2]-s),r[3]=c+t*(n[3]-c),r}function ei(r,e){e=e||1;var n,t,a,i,s,c;do n=Q.RANDOM()*2-1,t=Q.RANDOM()*2-1,s=n*n+t*t;while(s>=1);do a=Q.RANDOM()*2-1,i=Q.RANDOM()*2-1,c=a*a+i*i;while(c>=1);var l=Math.sqrt((1-s)/c);return r[0]=e*n,r[1]=e*t,r[2]=e*a*l,r[3]=e*i*l,r}function ni(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3];return r[0]=n[0]*t+n[4]*a+n[8]*i+n[12]*s,r[1]=n[1]*t+n[5]*a+n[9]*i+n[13]*s,r[2]=n[2]*t+n[6]*a+n[10]*i+n[14]*s,r[3]=n[3]*t+n[7]*a+n[11]*i+n[15]*s,r}function ti(r,e,n){var t=e[0],a=e[1],i=e[2],s=n[0],c=n[1],l=n[2],f=n[3],v=f*t+c*i-l*a,h=f*a+l*t-s*i,p=f*i+s*a-c*t,M=-s*t-c*a-l*i;return r[0]=v*f+M*-s+h*-l-p*-c,r[1]=h*f+M*-c+p*-s-v*-l,r[2]=p*f+M*-l+v*-c-h*-s,r[3]=e[3],r}function ai(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r}function ii(r){return"vec4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}function si(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]}function ci(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=e[0],c=e[1],l=e[2],f=e[3];return Math.abs(n-s)<=Q.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(t-c)<=Q.EPSILON*Math.max(1,Math.abs(t),Math.abs(c))&&Math.abs(a-l)<=Q.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-f)<=Q.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))}var li=Ie;T.sub=li;var fi=Ne;T.mul=fi;var vi=we;T.div=vi;var hi=qe;T.dist=hi;var Mi=De;T.sqrDist=Mi;var pi=Le;T.len=pi;var yi=oe;T.sqrLen=yi;var mi=function(){var r=Fe();return function(e,n,t,a,i,s){var c,l;for(n||(n=4),t||(t=0),a?l=Math.min(a*n+t,e.length):l=e.length,c=t;c<l;c+=n)r[0]=e[c],r[1]=e[c+1],r[2]=e[c+2],r[3]=e[c+3],i(r,r,s),e[c]=r[0],e[c+1]=r[1],e[c+2]=r[2],e[c+3]=r[3];return e}}();T.forEach=mi});var zr=W(x=>{"use strict";function gr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?gr=function(n){return typeof n}:gr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gr(r)}Object.defineProperty(x,"__esModule",{value:!0});x.create=Lr;x.identity=di;x.setAxisAngle=Ye;x.getAxisAngle=xi;x.getAngle=gi;x.multiply=Be;x.rotateX=Ai;x.rotateY=Ei;x.rotateZ=Ri;x.calculateW=Oi;x.exp=be;x.ln=Ue;x.pow=Pi;x.slerp=Er;x.random=Ti;x.invert=Si;x.conjugate=Fi;x.fromMat3=Ce;x.fromEuler=Ii;x.str=Ni;x.setAxes=x.sqlerp=x.rotationTo=x.equals=x.exactEquals=x.normalize=x.sqrLen=x.squaredLength=x.len=x.length=x.lerp=x.dot=x.scale=x.mul=x.add=x.set=x.copy=x.fromValues=x.clone=void 0;var ir=Ar(J()),_i=Ar(Nr()),rr=Ar(qr()),H=Ar(Dr());function ze(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(ze=function(a){return a?n:e})(r)}function Ar(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||gr(r)!=="object"&&typeof r!="function")return{default:r};var n=ze(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function Lr(){var r=new ir.ARRAY_TYPE(4);return ir.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0),r[3]=1,r}function di(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r}function Ye(r,e,n){n=n*.5;var t=Math.sin(n);return r[0]=t*e[0],r[1]=t*e[1],r[2]=t*e[2],r[3]=Math.cos(n),r}function xi(r,e){var n=Math.acos(e[3])*2,t=Math.sin(n/2);return t>ir.EPSILON?(r[0]=e[0]/t,r[1]=e[1]/t,r[2]=e[2]/t):(r[0]=1,r[1]=0,r[2]=0),n}function gi(r,e){var n=Ve(r,e);return Math.acos(2*n*n-1)}function Be(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[0],l=n[1],f=n[2],v=n[3];return r[0]=t*v+s*c+a*f-i*l,r[1]=a*v+s*l+i*c-t*f,r[2]=i*v+s*f+t*l-a*c,r[3]=s*v-t*c-a*l-i*f,r}function Ai(r,e,n){n*=.5;var t=e[0],a=e[1],i=e[2],s=e[3],c=Math.sin(n),l=Math.cos(n);return r[0]=t*l+s*c,r[1]=a*l+i*c,r[2]=i*l-a*c,r[3]=s*l-t*c,r}function Ei(r,e,n){n*=.5;var t=e[0],a=e[1],i=e[2],s=e[3],c=Math.sin(n),l=Math.cos(n);return r[0]=t*l-i*c,r[1]=a*l+s*c,r[2]=i*l+t*c,r[3]=s*l-a*c,r}function Ri(r,e,n){n*=.5;var t=e[0],a=e[1],i=e[2],s=e[3],c=Math.sin(n),l=Math.cos(n);return r[0]=t*l+a*c,r[1]=a*l-t*c,r[2]=i*l+s*c,r[3]=s*l-i*c,r}function Oi(r,e){var n=e[0],t=e[1],a=e[2];return r[0]=n,r[1]=t,r[2]=a,r[3]=Math.sqrt(Math.abs(1-n*n-t*t-a*a)),r}function be(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=Math.sqrt(n*n+t*t+a*a),c=Math.exp(i),l=s>0?c*Math.sin(s)/s:0;return r[0]=n*l,r[1]=t*l,r[2]=a*l,r[3]=c*Math.cos(s),r}function Ue(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=Math.sqrt(n*n+t*t+a*a),c=s>0?Math.atan2(s,i)/s:0;return r[0]=n*c,r[1]=t*c,r[2]=a*c,r[3]=.5*Math.log(n*n+t*t+a*a+i*i),r}function Pi(r,e,n){return Ue(r,e),ue(r,r,n),be(r,r),r}function Er(r,e,n,t){var a=e[0],i=e[1],s=e[2],c=e[3],l=n[0],f=n[1],v=n[2],h=n[3],p,M,m,_,y;return M=a*l+i*f+s*v+c*h,M<0&&(M=-M,l=-l,f=-f,v=-v,h=-h),1-M>ir.EPSILON?(p=Math.acos(M),m=Math.sin(p),_=Math.sin((1-t)*p)/m,y=Math.sin(t*p)/m):(_=1-t,y=t),r[0]=_*a+y*l,r[1]=_*i+y*f,r[2]=_*s+y*v,r[3]=_*c+y*h,r}function Ti(r){var e=ir.RANDOM(),n=ir.RANDOM(),t=ir.RANDOM(),a=Math.sqrt(1-e),i=Math.sqrt(e);return r[0]=a*Math.sin(2*Math.PI*n),r[1]=a*Math.cos(2*Math.PI*n),r[2]=i*Math.sin(2*Math.PI*t),r[3]=i*Math.cos(2*Math.PI*t),r}function Si(r,e){var n=e[0],t=e[1],a=e[2],i=e[3],s=n*n+t*t+a*a+i*i,c=s?1/s:0;return r[0]=-n*c,r[1]=-t*c,r[2]=-a*c,r[3]=i*c,r}function Fi(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r}function Ce(r,e){var n=e[0]+e[4]+e[8],t;if(n>0)t=Math.sqrt(n+1),r[3]=.5*t,t=.5/t,r[0]=(e[5]-e[7])*t,r[1]=(e[6]-e[2])*t,r[2]=(e[1]-e[3])*t;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[a*3+a]&&(a=2);var i=(a+1)%3,s=(a+2)%3;t=Math.sqrt(e[a*3+a]-e[i*3+i]-e[s*3+s]+1),r[a]=.5*t,t=.5/t,r[3]=(e[i*3+s]-e[s*3+i])*t,r[i]=(e[i*3+a]+e[a*3+i])*t,r[s]=(e[s*3+a]+e[a*3+s])*t}return r}function Ii(r,e,n,t){var a=.5*Math.PI/180;e*=a,n*=a,t*=a;var i=Math.sin(e),s=Math.cos(e),c=Math.sin(n),l=Math.cos(n),f=Math.sin(t),v=Math.cos(t);return r[0]=i*l*v-s*c*f,r[1]=s*c*v+i*l*f,r[2]=s*l*f-i*c*v,r[3]=s*l*v+i*c*f,r}function Ni(r){return"quat("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+")"}var wi=H.clone;x.clone=wi;var qi=H.fromValues;x.fromValues=qi;var Di=H.copy;x.copy=Di;var Li=H.set;x.set=Li;var oi=H.add;x.add=oi;var zi=Be;x.mul=zi;var ue=H.scale;x.scale=ue;var Ve=H.dot;x.dot=Ve;var Yi=H.lerp;x.lerp=Yi;var We=H.length;x.length=We;var Bi=We;x.len=Bi;var Ge=H.squaredLength;x.squaredLength=Ge;var bi=Ge;x.sqrLen=bi;var or=H.normalize;x.normalize=or;var Ui=H.exactEquals;x.exactEquals=Ui;var Ci=H.equals;x.equals=Ci;var ui=function(){var r=rr.create(),e=rr.fromValues(1,0,0),n=rr.fromValues(0,1,0);return function(t,a,i){var s=rr.dot(a,i);return s<-.999999?(rr.cross(r,e,a),rr.len(r)<1e-6&&rr.cross(r,n,a),rr.normalize(r,r),Ye(t,r,Math.PI),t):s>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(rr.cross(r,a,i),t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1+s,or(t,t))}}();x.rotationTo=ui;var Vi=function(){var r=Lr(),e=Lr();return function(n,t,a,i,s,c){return Er(r,t,s,c),Er(e,a,i,c),Er(n,r,e,2*c*(1-c)),n}}();x.sqlerp=Vi;var Wi=function(){var r=_i.create();return function(e,n,t,a){return r[0]=t[0],r[3]=t[1],r[6]=t[2],r[1]=a[0],r[4]=a[1],r[7]=a[2],r[2]=-n[0],r[5]=-n[1],r[8]=-n[2],or(e,Ce(e,r))}}();x.setAxes=Wi});var ke=W(I=>{"use strict";function Rr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rr=function(n){return typeof n}:Rr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rr(r)}Object.defineProperty(I,"__esModule",{value:!0});I.create=Gi;I.clone=Xi;I.fromValues=Hi;I.fromRotationTranslationValues=Zi;I.fromRotationTranslation=Ze;I.fromTranslation=Qi;I.fromRotation=Ki;I.fromMat4=Ji;I.copy=Qe;I.identity=$i;I.set=ki;I.getDual=r0;I.setDual=n0;I.getTranslation=t0;I.translate=a0;I.rotateX=i0;I.rotateY=s0;I.rotateZ=c0;I.rotateByQuatAppend=l0;I.rotateByQuatPrepend=f0;I.rotateAroundAxis=v0;I.add=h0;I.multiply=Ke;I.scale=p0;I.lerp=y0;I.invert=m0;I.conjugate=_0;I.normalize=g0;I.str=A0;I.exactEquals=E0;I.equals=R0;I.sqrLen=I.squaredLength=I.len=I.length=I.dot=I.mul=I.setReal=I.getReal=void 0;var V=Yr(J()),er=Yr(zr()),Xe=Yr(wr());function He(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(He=function(a){return a?n:e})(r)}function Yr(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||Rr(r)!=="object"&&typeof r!="function")return{default:r};var n=He(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function Gi(){var r=new V.ARRAY_TYPE(8);return V.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0,r[2]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0),r[3]=1,r}function Xi(r){var e=new V.ARRAY_TYPE(8);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e}function Hi(r,e,n,t,a,i,s,c){var l=new V.ARRAY_TYPE(8);return l[0]=r,l[1]=e,l[2]=n,l[3]=t,l[4]=a,l[5]=i,l[6]=s,l[7]=c,l}function Zi(r,e,n,t,a,i,s){var c=new V.ARRAY_TYPE(8);c[0]=r,c[1]=e,c[2]=n,c[3]=t;var l=a*.5,f=i*.5,v=s*.5;return c[4]=l*t+f*n-v*e,c[5]=f*t+v*r-l*n,c[6]=v*t+l*e-f*r,c[7]=-l*r-f*e-v*n,c}function Ze(r,e,n){var t=n[0]*.5,a=n[1]*.5,i=n[2]*.5,s=e[0],c=e[1],l=e[2],f=e[3];return r[0]=s,r[1]=c,r[2]=l,r[3]=f,r[4]=t*f+a*l-i*c,r[5]=a*f+i*s-t*l,r[6]=i*f+t*c-a*s,r[7]=-t*s-a*c-i*l,r}function Qi(r,e){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=e[0]*.5,r[5]=e[1]*.5,r[6]=e[2]*.5,r[7]=0,r}function Ki(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function Ji(r,e){var n=er.create();Xe.getRotation(n,e);var t=new V.ARRAY_TYPE(3);return Xe.getTranslation(t,e),Ze(r,n,t),r}function Qe(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r}function $i(r){return r[0]=0,r[1]=0,r[2]=0,r[3]=1,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r}function ki(r,e,n,t,a,i,s,c,l){return r[0]=e,r[1]=n,r[2]=t,r[3]=a,r[4]=i,r[5]=s,r[6]=c,r[7]=l,r}var ji=er.copy;I.getReal=ji;function r0(r,e){return r[0]=e[4],r[1]=e[5],r[2]=e[6],r[3]=e[7],r}var e0=er.copy;I.setReal=e0;function n0(r,e){return r[4]=e[0],r[5]=e[1],r[6]=e[2],r[7]=e[3],r}function t0(r,e){var n=e[4],t=e[5],a=e[6],i=e[7],s=-e[0],c=-e[1],l=-e[2],f=e[3];return r[0]=(n*f+i*s+t*l-a*c)*2,r[1]=(t*f+i*c+a*s-n*l)*2,r[2]=(a*f+i*l+n*c-t*s)*2,r}function a0(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[0]*.5,l=n[1]*.5,f=n[2]*.5,v=e[4],h=e[5],p=e[6],M=e[7];return r[0]=t,r[1]=a,r[2]=i,r[3]=s,r[4]=s*c+a*f-i*l+v,r[5]=s*l+i*c-t*f+h,r[6]=s*f+t*l-a*c+p,r[7]=-t*c-a*l-i*f+M,r}function i0(r,e,n){var t=-e[0],a=-e[1],i=-e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=c*s+v*t+l*i-f*a,p=l*s+v*a+f*t-c*i,M=f*s+v*i+c*a-l*t,m=v*s-c*t-l*a-f*i;return er.rotateX(r,e,n),t=r[0],a=r[1],i=r[2],s=r[3],r[4]=h*s+m*t+p*i-M*a,r[5]=p*s+m*a+M*t-h*i,r[6]=M*s+m*i+h*a-p*t,r[7]=m*s-h*t-p*a-M*i,r}function s0(r,e,n){var t=-e[0],a=-e[1],i=-e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=c*s+v*t+l*i-f*a,p=l*s+v*a+f*t-c*i,M=f*s+v*i+c*a-l*t,m=v*s-c*t-l*a-f*i;return er.rotateY(r,e,n),t=r[0],a=r[1],i=r[2],s=r[3],r[4]=h*s+m*t+p*i-M*a,r[5]=p*s+m*a+M*t-h*i,r[6]=M*s+m*i+h*a-p*t,r[7]=m*s-h*t-p*a-M*i,r}function c0(r,e,n){var t=-e[0],a=-e[1],i=-e[2],s=e[3],c=e[4],l=e[5],f=e[6],v=e[7],h=c*s+v*t+l*i-f*a,p=l*s+v*a+f*t-c*i,M=f*s+v*i+c*a-l*t,m=v*s-c*t-l*a-f*i;return er.rotateZ(r,e,n),t=r[0],a=r[1],i=r[2],s=r[3],r[4]=h*s+m*t+p*i-M*a,r[5]=p*s+m*a+M*t-h*i,r[6]=M*s+m*i+h*a-p*t,r[7]=m*s-h*t-p*a-M*i,r}function l0(r,e,n){var t=n[0],a=n[1],i=n[2],s=n[3],c=e[0],l=e[1],f=e[2],v=e[3];return r[0]=c*s+v*t+l*i-f*a,r[1]=l*s+v*a+f*t-c*i,r[2]=f*s+v*i+c*a-l*t,r[3]=v*s-c*t-l*a-f*i,c=e[4],l=e[5],f=e[6],v=e[7],r[4]=c*s+v*t+l*i-f*a,r[5]=l*s+v*a+f*t-c*i,r[6]=f*s+v*i+c*a-l*t,r[7]=v*s-c*t-l*a-f*i,r}function f0(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[0],l=n[1],f=n[2],v=n[3];return r[0]=t*v+s*c+a*f-i*l,r[1]=a*v+s*l+i*c-t*f,r[2]=i*v+s*f+t*l-a*c,r[3]=s*v-t*c-a*l-i*f,c=n[4],l=n[5],f=n[6],v=n[7],r[4]=t*v+s*c+a*f-i*l,r[5]=a*v+s*l+i*c-t*f,r[6]=i*v+s*f+t*l-a*c,r[7]=s*v-t*c-a*l-i*f,r}function v0(r,e,n,t){if(Math.abs(t)<V.EPSILON)return Qe(r,e);var a=Math.hypot(n[0],n[1],n[2]);t=t*.5;var i=Math.sin(t),s=i*n[0]/a,c=i*n[1]/a,l=i*n[2]/a,f=Math.cos(t),v=e[0],h=e[1],p=e[2],M=e[3];r[0]=v*f+M*s+h*l-p*c,r[1]=h*f+M*c+p*s-v*l,r[2]=p*f+M*l+v*c-h*s,r[3]=M*f-v*s-h*c-p*l;var m=e[4],_=e[5],y=e[6],d=e[7];return r[4]=m*f+d*s+_*l-y*c,r[5]=_*f+d*c+y*s-m*l,r[6]=y*f+d*l+m*c-_*s,r[7]=d*f-m*s-_*c-y*l,r}function h0(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r}function Ke(r,e,n){var t=e[0],a=e[1],i=e[2],s=e[3],c=n[4],l=n[5],f=n[6],v=n[7],h=e[4],p=e[5],M=e[6],m=e[7],_=n[0],y=n[1],d=n[2],P=n[3];return r[0]=t*P+s*_+a*d-i*y,r[1]=a*P+s*y+i*_-t*d,r[2]=i*P+s*d+t*y-a*_,r[3]=s*P-t*_-a*y-i*d,r[4]=t*v+s*c+a*f-i*l+h*P+m*_+p*d-M*y,r[5]=a*v+s*l+i*c-t*f+p*P+m*y+M*_-h*d,r[6]=i*v+s*f+t*l-a*c+M*P+m*d+h*y-p*_,r[7]=s*v-t*c-a*l-i*f+m*P-h*_-p*y-M*d,r}var M0=Ke;I.mul=M0;function p0(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r}var Je=er.dot;I.dot=Je;function y0(r,e,n,t){var a=1-t;return Je(e,n)<0&&(t=-t),r[0]=e[0]*a+n[0]*t,r[1]=e[1]*a+n[1]*t,r[2]=e[2]*a+n[2]*t,r[3]=e[3]*a+n[3]*t,r[4]=e[4]*a+n[4]*t,r[5]=e[5]*a+n[5]*t,r[6]=e[6]*a+n[6]*t,r[7]=e[7]*a+n[7]*t,r}function m0(r,e){var n=Or(e);return r[0]=-e[0]/n,r[1]=-e[1]/n,r[2]=-e[2]/n,r[3]=e[3]/n,r[4]=-e[4]/n,r[5]=-e[5]/n,r[6]=-e[6]/n,r[7]=e[7]/n,r}function _0(r,e){return r[0]=-e[0],r[1]=-e[1],r[2]=-e[2],r[3]=e[3],r[4]=-e[4],r[5]=-e[5],r[6]=-e[6],r[7]=e[7],r}var $e=er.length;I.length=$e;var d0=$e;I.len=d0;var Or=er.squaredLength;I.squaredLength=Or;var x0=Or;I.sqrLen=x0;function g0(r,e){var n=Or(e);if(n>0){n=Math.sqrt(n);var t=e[0]/n,a=e[1]/n,i=e[2]/n,s=e[3]/n,c=e[4],l=e[5],f=e[6],v=e[7],h=t*c+a*l+i*f+s*v;r[0]=t,r[1]=a,r[2]=i,r[3]=s,r[4]=(c-t*h)/n,r[5]=(l-a*h)/n,r[6]=(f-i*h)/n,r[7]=(v-s*h)/n}return r}function A0(r){return"quat2("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+")"}function E0(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]}function R0(r,e){var n=r[0],t=r[1],a=r[2],i=r[3],s=r[4],c=r[5],l=r[6],f=r[7],v=e[0],h=e[1],p=e[2],M=e[3],m=e[4],_=e[5],y=e[6],d=e[7];return Math.abs(n-v)<=V.EPSILON*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(t-h)<=V.EPSILON*Math.max(1,Math.abs(t),Math.abs(h))&&Math.abs(a-p)<=V.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-M)<=V.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(s-m)<=V.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(c-_)<=V.EPSILON*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(l-y)<=V.EPSILON*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(f-d)<=V.EPSILON*Math.max(1,Math.abs(f),Math.abs(d))}});var fn=W(E=>{"use strict";function Pr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pr=function(n){return typeof n}:Pr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Pr(r)}Object.defineProperty(E,"__esModule",{value:!0});E.create=rn;E.clone=P0;E.fromValues=T0;E.copy=S0;E.set=F0;E.add=I0;E.subtract=en;E.multiply=nn;E.divide=tn;E.ceil=N0;E.floor=w0;E.min=q0;E.max=D0;E.round=L0;E.scale=o0;E.scaleAndAdd=z0;E.distance=an;E.squaredDistance=sn;E.length=cn;E.squaredLength=ln;E.negate=Y0;E.inverse=B0;E.normalize=b0;E.dot=U0;E.cross=C0;E.lerp=u0;E.random=V0;E.transformMat2=W0;E.transformMat2d=G0;E.transformMat3=X0;E.transformMat4=H0;E.rotate=Z0;E.angle=Q0;E.zero=K0;E.str=J0;E.exactEquals=$0;E.equals=k0;E.forEach=E.sqrLen=E.sqrDist=E.dist=E.div=E.mul=E.sub=E.len=void 0;var sr=O0(J());function je(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(je=function(a){return a?n:e})(r)}function O0(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||Pr(r)!=="object"&&typeof r!="function")return{default:r};var n=je(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}function rn(){var r=new sr.ARRAY_TYPE(2);return sr.ARRAY_TYPE!=Float32Array&&(r[0]=0,r[1]=0),r}function P0(r){var e=new sr.ARRAY_TYPE(2);return e[0]=r[0],e[1]=r[1],e}function T0(r,e){var n=new sr.ARRAY_TYPE(2);return n[0]=r,n[1]=e,n}function S0(r,e){return r[0]=e[0],r[1]=e[1],r}function F0(r,e,n){return r[0]=e,r[1]=n,r}function I0(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r}function en(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r}function nn(r,e,n){return r[0]=e[0]*n[0],r[1]=e[1]*n[1],r}function tn(r,e,n){return r[0]=e[0]/n[0],r[1]=e[1]/n[1],r}function N0(r,e){return r[0]=Math.ceil(e[0]),r[1]=Math.ceil(e[1]),r}function w0(r,e){return r[0]=Math.floor(e[0]),r[1]=Math.floor(e[1]),r}function q0(r,e,n){return r[0]=Math.min(e[0],n[0]),r[1]=Math.min(e[1],n[1]),r}function D0(r,e,n){return r[0]=Math.max(e[0],n[0]),r[1]=Math.max(e[1],n[1]),r}function L0(r,e){return r[0]=Math.round(e[0]),r[1]=Math.round(e[1]),r}function o0(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r}function z0(r,e,n,t){return r[0]=e[0]+n[0]*t,r[1]=e[1]+n[1]*t,r}function an(r,e){var n=e[0]-r[0],t=e[1]-r[1];return Math.hypot(n,t)}function sn(r,e){var n=e[0]-r[0],t=e[1]-r[1];return n*n+t*t}function cn(r){var e=r[0],n=r[1];return Math.hypot(e,n)}function ln(r){var e=r[0],n=r[1];return e*e+n*n}function Y0(r,e){return r[0]=-e[0],r[1]=-e[1],r}function B0(r,e){return r[0]=1/e[0],r[1]=1/e[1],r}function b0(r,e){var n=e[0],t=e[1],a=n*n+t*t;return a>0&&(a=1/Math.sqrt(a)),r[0]=e[0]*a,r[1]=e[1]*a,r}function U0(r,e){return r[0]*e[0]+r[1]*e[1]}function C0(r,e,n){var t=e[0]*n[1]-e[1]*n[0];return r[0]=r[1]=0,r[2]=t,r}function u0(r,e,n,t){var a=e[0],i=e[1];return r[0]=a+t*(n[0]-a),r[1]=i+t*(n[1]-i),r}function V0(r,e){e=e||1;var n=sr.RANDOM()*2*Math.PI;return r[0]=Math.cos(n)*e,r[1]=Math.sin(n)*e,r}function W0(r,e,n){var t=e[0],a=e[1];return r[0]=n[0]*t+n[2]*a,r[1]=n[1]*t+n[3]*a,r}function G0(r,e,n){var t=e[0],a=e[1];return r[0]=n[0]*t+n[2]*a+n[4],r[1]=n[1]*t+n[3]*a+n[5],r}function X0(r,e,n){var t=e[0],a=e[1];return r[0]=n[0]*t+n[3]*a+n[6],r[1]=n[1]*t+n[4]*a+n[7],r}function H0(r,e,n){var t=e[0],a=e[1];return r[0]=n[0]*t+n[4]*a+n[12],r[1]=n[1]*t+n[5]*a+n[13],r}function Z0(r,e,n,t){var a=e[0]-n[0],i=e[1]-n[1],s=Math.sin(t),c=Math.cos(t);return r[0]=a*c-i*s+n[0],r[1]=a*s+i*c+n[1],r}function Q0(r,e){var n=r[0],t=r[1],a=e[0],i=e[1],s=Math.sqrt(n*n+t*t)*Math.sqrt(a*a+i*i),c=s&&(n*a+t*i)/s;return Math.acos(Math.min(Math.max(c,-1),1))}function K0(r){return r[0]=0,r[1]=0,r}function J0(r){return"vec2("+r[0]+", "+r[1]+")"}function $0(r,e){return r[0]===e[0]&&r[1]===e[1]}function k0(r,e){var n=r[0],t=r[1],a=e[0],i=e[1];return Math.abs(n-a)<=sr.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(t-i)<=sr.EPSILON*Math.max(1,Math.abs(t),Math.abs(i))}var j0=cn;E.len=j0;var rs=en;E.sub=rs;var es=nn;E.mul=es;var ns=tn;E.div=ns;var ts=an;E.dist=ts;var as=sn;E.sqrDist=as;var is=ln;E.sqrLen=is;var ss=function(){var r=rn();return function(e,n,t,a,i,s){var c,l;for(n||(n=2),t||(t=0),a?l=Math.min(a*n+t,e.length):l=e.length,c=t;c<l;c+=n)r[0]=e[c],r[1]=e[c+1],i(r,r,s),e[c]=r[0],e[c+1]=r[1];return e}}();E.forEach=ss});var Sr=W(u=>{"use strict";function Tr(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tr=function(n){return typeof n}:Tr=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tr(r)}Object.defineProperty(u,"__esModule",{value:!0});u.vec4=u.vec3=u.vec2=u.quat2=u.quat=u.mat4=u.mat3=u.mat2d=u.mat2=u.glMatrix=void 0;var cs=k(J());u.glMatrix=cs;var ls=k(re());u.mat2=ls;var fs=k(ae());u.mat2d=fs;var vs=k(Nr());u.mat3=vs;var hs=k(wr());u.mat4=hs;var Ms=k(zr());u.quat=Ms;var ps=k(ke());u.quat2=ps;var ys=k(fn());u.vec2=ys;var ms=k(qr());u.vec3=ms;var _s=k(Dr());u.vec4=_s;function vn(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(vn=function(a){return a?n:e})(r)}function k(r,e){if(!e&&r&&r.__esModule)return r;if(r===null||Tr(r)!=="object"&&typeof r!="function")return{default:r};var n=vn(e);if(n&&n.has(r))return n.get(r);var t={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in r)if(i!=="default"&&Object.prototype.hasOwnProperty.call(r,i)){var s=a?Object.getOwnPropertyDescriptor(r,i):null;s&&(s.get||s.set)?Object.defineProperty(t,i,s):t[i]=r[i]}return t.default=r,n&&n.set(r,t),t}});var Mn=W(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var cr=Sr(),hn=class{constructor(){this.typeMap={33984:{constant:"TEXTURE0",setterFn:null},35048:{constant:"DYNAMIC_DRAW",setterFn:null},34962:{constant:"ARRAY_BUFFER",setterFn:null},34963:{constant:"ELEMENT_ARRAY_BUFFER",setterFn:null},35345:{constant:"UNIFORM_BUFFER",setterFn:null},35982:{constant:"TRANSFORM_FEEDBACK_BUFFER",setterFn:null},36386:{constant:"TRANSFORM_FEEDBACK",setterFn:null},35713:{constant:"COMPILE_STATUS",setterFn:null},35714:{constant:"LINK_STATUS",setterFn:null},35632:{constant:"FRAGMENT_SHADER",setterFn:null},35633:{constant:"VERTEX_SHADER",setterFn:null},35981:{constant:"SEPARATE_ATTRIBS",setterFn:null},35718:{constant:"ACTIVE_UNIFORMS",setterFn:null},35721:{constant:"ACTIVE_ATTRIBUTES",setterFn:null},35971:{constant:"TRANSFORM_FEEDBACK_VARYINGS",setterFn:null},35382:{constant:"ACTIVE_UNIFORM_BLOCKS",setterFn:null},35396:{constant:"UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",setterFn:null},35398:{constant:"UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",setterFn:null},35392:{constant:"UNIFORM_BLOCK_DATA_SIZE",setterFn:null},35395:{constant:"UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",setterFn:null},5126:{constant:"FLOAT",setterFn:e=>(n,t)=>e.uniform1f(n,t)},35664:{constant:"FLOAT_VEC2",setterFn:e=>(n,t)=>e.uniform2fv(n,t)},35665:{constant:"FLOAT_VEC3",setterFn:e=>(n,t)=>e.uniform3fv(n,t)},35666:{constant:"FLOAT_VEC4",setterFn:e=>(n,t)=>e.uniform4fv(n,t)},5124:{constant:"INT",setterFn:e=>(n,t)=>e.uniform1i(n,t)},35667:{constant:"INT_VEC2",setterFn:e=>(n,t)=>e.uniform2iv(n,t)},35668:{constant:"INT_VEC3",setterFn:e=>(n,t)=>e.uniform3iv(n,t)},35669:{constant:"INT_VEC4",setterFn:e=>(n,t)=>e.uniform4iv(n,t)},35670:{constant:"BOOL",setterFn:e=>(n,t)=>e.uniform1i(n,t)},35671:{constant:"BOOL_VEC2",setterFn:e=>(n,t)=>e.uniform2iv(n,t)},35672:{constant:"BOOL_VEC3",setterFn:e=>(n,t)=>e.uniform3iv(n,t)},35673:{constant:"BOOL_VEC4",setterFn:e=>(n,t)=>e.uniform4iv(n,t)},35674:{constant:"FLOAT_MAT2",setterFn:e=>(n,t)=>e.uniformMatrix2fv(n,!1,t)},35675:{constant:"FLOAT_MAT3",setterFn:e=>(n,t)=>e.uniformMatrix3fv(n,!1,t)},35676:{constant:"FLOAT_MAT4",setterFn:e=>(n,t)=>e.uniformMatrix4fv(n,!1,t)},35678:{constant:"SAMPLER_2D",setterFn:e=>(n,t)=>this.samplerSetter(e,n,t)},35680:{constant:"SAMPLER_CUBE",setterFn:null},35679:{constant:"SAMPLER_3D",setterFn:null},35682:{constant:"SAMPLER_2D_SHADOW",setterFn:null},35685:{constant:"FLOAT_MAT2x3",setterFn:e=>(n,t)=>e.uniformMatrix2x3fv(n,!1,t)},35686:{constant:"FLOAT_MAT2x4",setterFn:e=>(n,t)=>e.uniformMatrix2x4fv(n,!1,t)},35687:{constant:"FLOAT_MAT3x2",setterFn:e=>(n,t)=>e.uniformMatrix3x2fv(n,!1,t)},35688:{constant:"FLOAT_MAT3x4",setterFn:e=>(n,t)=>e.uniformMatrix3x4fv(n,!1,t)},35689:{constant:"FLOAT_MAT4x2",setterFn:e=>(n,t)=>e.uniformMatrix4x2fv(n,!1,t)},35690:{constant:"FLOAT_MAT4x3",setterFn:e=>(n,t)=>e.uniformMatrix4x3fv(n,!1,t)},36289:{constant:"SAMPLER_2D_ARRAY",setterFn:null},36292:{constant:"SAMPLER_2D_ARRAY_SHADOW",setterFn:null},36293:{constant:"SAMPLER_CUBE_SHADOW",setterFn:null},5125:{constant:"UNSIGNED_INT",setterFn:null},36294:{constant:"UNSIGNED_INT_VEC2",setterFn:null},36295:{constant:"UNSIGNED_INT_VEC3",setterFn:null},36296:{constant:"UNSIGNED_INT_VEC4",setterFn:null},36298:{constant:"INT_SAMPLER_2D",setterFn:null},36299:{constant:"INT_SAMPLER_3D",setterFn:null},36300:{constant:"INT_SAMPLER_CUBE",setterFn:null},36303:{constant:"INT_SAMPLER_2D_ARRAY",setterFn:null},36306:{constant:"UNSIGNED_INT_SAMPLER_2D",setterFn:null},36307:{constant:"UNSIGNED_INT_SAMPLER_3D",setterFn:null},36308:{constant:"UNSIGNED_INT_SAMPLER_CUBE",setterFn:null},36311:{constant:"UNSIGNED_INT_SAMPLER_2D_ARRAY",setterFn:null},3553:{constant:"TEXTURE_2D",setterFn:null},34067:{constant:"TEXTURE_CUBE_MAP",setterFn:null},32879:{constant:"TEXTURE_3D",setterFn:null},35866:{constant:"TEXTURE_2D_ARRAY",setterFn:null}},this.textureLoader={RGB:(e,n,t,a)=>e.texImage2D(e.TEXTURE_2D,0,e.RGB,n,t,0,e.RGB,e.UNSIGNED_BYTE,a),RGBA:(e,n,t,a)=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,t,0,e.RGBA,e.UNSIGNED_BYTE,a)}}canvas(e,n,t=!1,a=null){let i=document.createElement("canvas");if(i.width=e,i.height=n,(a||document.body).prepend(i),this._gl=i.getContext("webgl2",{premultipliedAlpha:t}),!this._gl){console.warn("You're browser does not support WebGL 2.0. Soz.");return}return i}shaderProgram(e,n,t=null){let a=this._gl.createProgram(),i=this.loadShader(this._gl.VERTEX_SHADER,e),s=this.loadShader(this._gl.FRAGMENT_SHADER,n);return this._gl.attachShader(a,i),this._gl.attachShader(a,s),t&&this._gl.transformFeedbackVaryings(a,t,this.gl.INTERLEAVED_ATTRIBS),this._gl.linkProgram(a),this._gl.getProgramParameter(a,this._gl.LINK_STATUS)?a:(alert("Unable to initialize the shader program: "+this._gl.getProgramInfoLog(a)),null)}loadShader(e,n){let t=this._gl.createShader(e);return this._gl.shaderSource(t,n),this._gl.compileShader(t),this._gl.getShaderParameter(t,this._gl.COMPILE_STATUS)?t:(alert("An error occurred compiling the shaders: "+this._gl.getShaderInfoLog(t)),this._gl.deleteShader(t),null)}getUniformSetters(e){let n=this._gl.getProgramParameter(e,this._gl.ACTIVE_UNIFORMS),t={};for(let a=0;a<n;++a){let i=this._gl.getActiveUniform(e,a),s=i.name;s.endsWith("[0]")&&(s=s.substr(0,s.length-3));let c=this._gl.getUniformLocation(e,i.name),{constant:l,setterFn:f}=this.typeMap[i.type],v=f(this._gl);t[s]={location:c,constant:l,setter:v}}return t}getAttributeSetters(e){let n=this._gl.getProgramParameter(e,this._gl.ACTIVE_ATTRIBUTES),t={};for(let a=0;a<n;++a){let i=this._gl.getActiveAttrib(e,a),s=i.name,c=this._gl.getAttribLocation(e,i.name),{constant:l,setterFn:f}=this.typeMap[i.type],v=f(this._gl);t[s]={location:c,constant:l,setter:v}}return t}setUniforms(e,n){for(let t in n){let a=n[t],{location:i,setter:s}=e[t];s(i,a)}}createTexture(e,n,t,a=null){let i=this._gl.createTexture();return this._gl.bindTexture(this._gl.TEXTURE_2D,i),this.textureLoader[t](this._gl,e,n,a),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.LINEAR),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),i}createFramebuffer(e){let n=this._gl.createFramebuffer();return this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,n),this._gl.framebufferTexture2D(this._gl.FRAMEBUFFER,this._gl.COLOR_ATTACHMENT0,this._gl.TEXTURE_2D,e,0),n}setFramebufferAttachmentSizes(e,n,t,a){this._gl.bindTexture(this._gl.TEXTURE_2D,t),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,e,n,0,this._gl.RGBA,this._gl.UNSIGNED_BYTE,null),this._gl.bindRenderbuffer(this._gl.RENDERBUFFER,a),this._gl.renderbufferStorage(this._gl.RENDERBUFFER,this._gl.DEPTH_COMPONENT16,e,n)}createStreamBuffer(e){let n=this._gl.createBuffer();return this._gl.bindBuffer(this._gl.ARRAY_BUFFER,n),this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.STREAM_DRAW),n}viewMat(e){let n={pos:cr.vec3.fromValues(0,0,1),up:cr.vec3.fromValues(0,1,0),target:cr.vec3.fromValues(0,0,0)};return e&&Object.assign(n,e),cr.mat4.lookAt(cr.mat4.create(),n.pos,n.target,n.up)}defaultProjMat(){let e=45*Math.PI/180,n=this.aspect,t=.1,a=100;return cr.mat4.perspective(cr.mat4.create(),e,n,t,a)}get gl(){return this._gl}set gl(e){this._gl=e}get aspect(){return this._gl.canvas.clientWidth/this._gl.canvas.clientHeight}samplerSetter(e,n,t){return()=>{let a=0;e.uniform1i(n,a),e.activeTexture(e.TEXTURE0+a),e.bindTexture(e.TEXTURE_2D,t)}}};Br.default=hn});var yn=W(br=>{"use strict";Object.defineProperty(br,"__esModule",{value:!0});var nr=Sr(),pn=class{constructor(e){this._indexedGeometry=!1,this._uniformsNeedsUpdate=!1,this._translate=[0,0,0],this._rotation={speed:0,axis:[0,0,0]},this._oscillate=!1,this._buffers=[],this._VAOs=[],this._modelMatrix=nr.mat4.create(),this._uniforms={},this._textures={},this.gl=e}setupVAO(e,n){if(this.gl.bindVertexArray(n),e.map(t=>{this.gl.bindBuffer(this.gl.ARRAY_BUFFER,t.buffer_object);let a=0,i;for(i in t.attributes){let s=t.attributes[i];this.gl.enableVertexAttribArray(s.location),this.gl.vertexAttribPointer(s.location,s.num_components,s.type,!1,t.stride,a),a+=s.num_components*s.size,s.divisor&&this.gl.vertexAttribDivisor(s.location,s.divisor)}}),this._indexedGeometry){let t=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,t),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(this._indices),this.gl.STATIC_DRAW)}this.gl.bindVertexArray(null),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}get VAO(){return this._VAOs[0]}get numVertices(){return this._verts.length/3}get verts(){return this._verts}get numIndices(){return this._indices.length}get buffers(){return this._buffers}get translate(){return this._translate}set translate(e){this._uniformsNeedsUpdate=!0,this._translate[0]=e[0],this._translate[1]=e[1],this._translate[2]=e[2]}set rotate(e){this._uniformsNeedsUpdate=!0;let[n,t]=Object.values(e);this._rotation.speed=n,this._rotation.axis[0]=t[0],this._rotation.axis[1]=t[1],this._rotation.axis[2]=t[2]}set oscillate(e){typeof e=="boolean"&&(this._oscillate=e)}get needsUpdate(){return this._uniformsNeedsUpdate}updateModelMatrix(e){nr.mat4.identity(this._modelMatrix);let n=nr.vec3.fromValues(...this._translate);return nr.mat4.translate(this._modelMatrix,this._modelMatrix,n),nr.mat4.rotate(this._modelMatrix,this._modelMatrix,(this._oscillate?Math.sin(e*.001)*90:e)*this._rotation.speed,this._rotation.axis),this._modelMatrix}updateInverseModelMatrix(){nr.mat4.invert(this._uniforms.u_InverseModelMatrix.value,this._uniforms.u_ModelMatrix.value)}normalizeEachVert(){for(let e=0;e<this._verts.length;e+=3){let n=this.normalizeFromArray(this._verts[e],this._verts[e+1],this._verts[e+2]);this._verts[e]=n[0],this._verts[e+1]=n[1],this._verts[e+2]=n[2]}}normalizeVerts(e){let n=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,a=[];for(let c=0;c<e.length;c+=3){let l=nr.vec3.fromValues(e[c],e[c+1],e[c+2]);a.push(l);let f=nr.vec3.len(l);n=Math.min(f,n),t=Math.max(f,t)}let i=1/t,s=new Array(e.length);for(let c=0;c<a.length;c++){let l=a[c];nr.vec3.scale(l,l,i);let f=c*3;s[f]=l[0],s[f+1]=l[1],s[f+2]=l[2]}return s}normalize(){this._verts=this.normalizeVerts(this._verts)}normalizeFromArray(e,n,t){let a=Math.sqrt(e*e+n*n+t*t);return[e/a,n/a,t/a]}centreVerts(){this._centroid||this.calcCentroid();for(let e=0;e<this._verts.length;e+=3)this._verts[e]-=this._centroid[0],this._verts[e+1]-=this._centroid[1],this._verts[e+2]-=this._centroid[2]}calcCentroid(){let e=0,n=0,t=0;for(let a=0;a<this._verts.length;a+=3)e+=this._verts[a],n+=this._verts[a+1],t+=this._verts[a+2];e/=this._verts.length/3,n/=this._verts.length/3,t/=this._verts.length/3,this._centroid=[e,n,t]}calcIndices(){let e=[];for(let n=0;n<this._verts.length;n+=3){let t=n/3;t>1&&e.push(t-1),e.push(t)}return e}};br.default=pn});var mn=W(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.Geometry=lr.GL_Handler=void 0;var ds=Mn();lr.GL_Handler=ds.default;var xs=yn();lr.Geometry=xs.default});var Fr=Qr(mn()),Ir=Qr(Sr()),Ur=class extends Fr.Geometry{constructor(e,n){super(e);this._verts=[],this._numPoints=n;for(let t=0;t<n;t++){let a=Math.random()*Math.PI*2,i=Math.random()*Math.PI*2;this._verts.push(Math.sin(a)*Math.cos(i),Math.sin(a)*Math.sin(i),Math.cos(a))}}linkProgram(e){this._buffers.push(this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._buffers[0]),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this._verts),this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null);let n={i_Position:{location:this.gl.getAttribLocation(e,"i_Position"),num_components:3,type:this.gl.FLOAT,size:4}};this._VAOs.push(this.gl.createVertexArray()),[{vao:this._VAOs[0],buffers:[{buffer_object:this._buffers[0],stride:0,attributes:n}]}].forEach(a=>this.setupVAO(a.buffers,a.vao))}},gs=`#version 300 es
precision mediump float;

in vec3 i_Position;

uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewMatrix;
uniform mat4 u_ModelMatrix;

void main(){
    gl_Position = u_ProjectionMatrix * u_ViewMatrix * u_ModelMatrix * vec4(i_Position, 1.0);
    gl_PointSize = (gl_Position.z * -1.0) + 6.0;
}`,As=`#version 300 es
precision mediump float;

out vec4 OUTCOLOUR;

void main(){
    float distance = length(2.0 * gl_PointCoord - 1.0);
    if (distance > 1.0) {
            discard;
    }
    OUTCOLOUR = vec4(0.0, 0.0, 0.0, 1.0);
}`,ar=new Fr.GL_Handler,Cs=ar.canvas(512,512),G=ar.gl,Cr=ar.shaderProgram(gs,As),Es=[0,0,3],Rs=ar.viewMat({pos:Ir.vec3.fromValues(...Es)}),Os=ar.defaultProjMat(),Ps=Ir.mat4.create(),hr=new Ur(G,1e4);hr.linkProgram(Cr);hr.rotate={speed:5e-4,axis:[1,1,1]};var _n={u_ModelMatrix:Ps,u_ViewMatrix:Rs,u_ProjectionMatrix:Os},dn=ar.getUniformSetters(Cr);G.useProgram(Cr);ar.setUniforms(dn,_n);G.bindVertexArray(hr.VAO);G.clearDepth(1);G.enable(G.CULL_FACE);G.enable(G.DEPTH_TEST);function xn(r){G.clear(G.COLOR_BUFFER_BIT|G.DEPTH_BUFFER_BIT),G.clearColor(.9,.9,.9,1),ar.setUniforms(dn,Zr(Hr({},_n),{u_ModelMatrix:hr.updateModelMatrix(r)})),G.drawArrays(G.POINTS,0,hr.numVertices),requestAnimationFrame(xn)}requestAnimationFrame(xn);})();
//# sourceMappingURL=point-sphere.js.map
